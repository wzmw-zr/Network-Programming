# 主机字节序与网络字节序

## 一、主机字节序

主机字节序有大端与小端之分，但是这两个字节序都有系统使用。



## 二、网络字节序

网络协议必须指定一个网络字节序。以TCP为例，每个TCP分节中都有16位的端口号和32位的`IPV4`地址。发送协议栈和接收协议栈必须就这些多字节字段的各个字节的传送顺序达成一致。**网际协议使用大端字节序来传送这些多字节整数。**



## 三、主机字节序与网络字节序互相转换

网络协议中有端口和`IP`地址，这两部分都有相应的主机字节序与网络字节序的转换。

**不过`IP`地址现在有更直接的IP地址转换函数来使用了。**

主机字节序与网络字节序之间的转换使用以下4个函数：

```c
#include<netinet/in.h>
// 主机字节序转网络字节序
uint16_t htons(uint16_t host16value); // 端口号是16位的，htons表示端口主机字节序转端口网络字节序
uint32_t htonl(uint32_t host32value); // IP地址是32位的，htonl表示IP地址主机字节序转IP地址网络字节序

//网络字节序转主机字节序
uint16_t ntohs(uint16_t net16value); //端口号是16位的，ntohsi表示端口网络字节序转端口主机字节序
uint32_t ntohl(uint32_t net32value); // IP地址是32位的，ntohl表示IP地址网络字节序转IP地址主机字节序
```

