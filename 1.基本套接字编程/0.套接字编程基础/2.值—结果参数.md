# 值—结果参数

当**往一个套接字函数传递一个套接字地址结构时，该结构总是以指针来传递**。

该**结构的长度也作为一个参数来传递，不过其传递方式取决于该结构的传递方向**：

+ 从进程到内核
+ 从内核到进程

## 一、从进程到内核传递套接字地址结构

从进程到内核传递套接字地址结构的函数通常有3个：`bind,connect,sendto`。这些函数的一个参数是指向某个套接字地址结构的指针，另一个参数是该结构的整数大小。

```c
struct sockaddr_in serv;
connect(sockfd, (struct sockaddr *)&serv, sizeof(serv));
```

指针和指针所指内容的大小都传递给了内核，于是内核知道需要从进程复制多少数据进来。



## 二、从内核到进程传递套接字地址结构

从内核到进程传递套接字地址结构的函数常见的有4个：`accept,recvfrom,getsockname, getpeername`。这四个函数中其中两个参数是指向套接字地址结构的指针和指向表示该结构大小的整数变量的指针。

```c
struct sockaddr_in cli;
socklen_t len = sizeof(cli);
accept(sockfd, (struct sockaddr *)&cli, &len);
// len在传入时是结构大小的值，告诉内核该结构的大小
// 函数返回时，结构的大小作为结果由len返回
```

由于函数被调用时，结构大小是一个值，它告诉内核该结构的大小，这样内核在写该结构时不至于越界;

当函数返回时，结构大小又是一个结果，告诉进程内核在该结构中写了多少信息。、

**这种类型的参数被称为值—结果参数。**