# IP分组处理规则

一下IP路由分组转发算法：

(1)**从数据报的首部提取目的主机的IP地址D，得出目的网络地址为N。**

(2)**若N就是与此路由器直接相连的某个网络地址，则进行直接交付**，不需要再经过其他的路由器，直接把数据报交付给目的主机（这里包括把目的主机地址D转换为具体的硬件地址，把数据报封装为MAC帧，再发送此帧）；否则就要执行(3)进行间接交付。

(3)若路由表中有**目的地址为D的特定主机路由**，则把数据报传送给路由表中所指明的下一跳路由器，否则执行(4)。

(4)若路由表中有**到达网络N的路由，则把数据报传送给路由表中所指明的下一跳路由器**，否则执行(5)。

(5)若路由表中有一个**默认路由**，则把数据报传送给路由表中所指明的下一跳路由器，否则执行(6)。

(6)**报告转发分组出错。**

